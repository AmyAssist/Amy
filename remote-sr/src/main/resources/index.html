<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
	</head>
	<body>
		<button onclick="startSR(event)">Start SR</button>
		<p id="textBox">
		</p>
	</body>
	<script>
		/**
		 * Simple Speech Recognition website.
		 * @author Benno Krau√ü
		 */
		if (!('webkitSpeechRecognition' in window)) {
			console.log('Browser doesn\'t support SR!');
		}
		var recognition = new webkitSpeechRecognition();
		recognition.lang = 'en-US';
		recognition.continuous = false;
		recognition.interimResults = false;

		var source = new EventSource("/rest/remotesr/eventstream");

		source.onmessage = function(event) {
			console.log('EventSource message: ', event.message);
		};
		source.onopen = function(event) {
			console.log('EventSource onopen: ', event);
		}

		source.onerror = function(event) {
			console.log('EventSource onerror: ', event);
		}

		recognition.onstart = function() {
			console.log('onstart');
		}

		recognition.onerror = function(event) {
			console.log('onerror: ', event);
		}

		recognition.onend = function() {
			console.log('onend');
		}

		recognition.onresult = function(event) {
			var result = event.results[0][0].transcript;
			console.log('onresult: ', result);
		}

		function startSR(event) {
			recognition.start();
		}

		source.addEventListener('START', startSR, false);
	</script>
</html>